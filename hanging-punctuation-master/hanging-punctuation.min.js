var stylefill={allRules:new Object,allFills:new Object,init:function(e){this.allFills=e,this.getStyleSheet(e)},objSize:function(e){var t,l=0;for(t in e)e.hasOwnProperty(t)&&l++;return l},arraySliceShim:function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,l){var n,i=this.length,r=[];if(this.charAt)for(n=0;i>n;n++)r.push(this.charAt(n));else for(n=0;n<this.length;n++)r.push(this[n]);return e.call(r,t,l||r.length)}}},loadFile:function(e,t,l){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&stylefill.findRules(e,this.responseText,l)},n.send(null)},getStyleSheet:function(e){var t=(new Array,Array.prototype.slice.call(document.getElementsByTagName("link")));t.push(Array.prototype.slice.call(document.getElementsByTagName("style"))[0]),t.reverse();for(var l=this.objSize(t);l-->0;){var n=t[l];n.innerHTML?this.findRules(e,n.innerHTML,l):n.href.match(document.domain)&&this.loadFile(e,n.href,l)}},checkRule:function(e){var t=e.replace(/(^|-)([a-z])/g,function(e,t,l){return l.toUpperCase()});return document.body&&("Webkit"+t in document.body.style||"Moz"+t in document.body.style||"O"+t in document.body.style||e in document.body.style)?!0:!1},findRules:function(e,t,l){if(t){this.objSize(e);for(property in e)for(var n,i=new RegExp("([^}{]+){([^}]+)?"+property.replace("-","\\-")+"[\\s\\t]*:[\\s\\t]*([^;]+)","gi"),r=stylefill.checkRule(property);n=i.exec(t);){var o=n[1].replace(/^([\s\n\r\t]+|\/\*.*?\*\/)+/,"").replace(/[\s\n\r\t]+$/,""),s=n[3];o=o.split(",");for(sel in o){var a=o[sel];stylefill.allRules[a]||(stylefill.allRules[a]=new Object),stylefill.allRules[a][property]={support:r,value:s}}}1==l&&this.runFills()}},runFills:function(){var e=stylefill.allRules,t=stylefill.allFills;for(i in e){var l=e[i];for(j in l){var n=l[j],r=t[j],o={support:n.support,selector:i,property:j,value:n.value};r(o)}}},binder:function(e,t,l){for(var t=t.split(","),n=t.length;n-->0;)e.attachEvent?e.attachEvent("on"+t[n].trim(),l):e.addEventListener(t[n].trim(),l,!1)}};!function(e,t){"use strict";var l=function(e,t,l){var n;return function(){var i=this,r=arguments,o=function(){n=null,l||e.apply(i,r)},s=l&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,r)}},n=function(l){var n,i,r={};for(n=e.querySelectorAll(l.selector),i=n.length;i-->0;){var o,s,a,u,c,f,p,h,y,d=0;if(s=n[i],a=s.textContent,u=a[0],c=a[a.length-1],f=t.getComputedStyle(s,null),"none"===l.value);else if("first"===l.value){if(null!==u.match(/\“|\”/)){o=f.fontWeight+" "+f.fontSize+" "+f.fontFamily+" "+f.fontStretch+" "+f.fontStyle,o in r||(p=e.createElement("span"),p.innerHTML=u,s.appendChild(p),r[o]=p.offsetWidth,s.removeChild(p)),y=r[o],p=null,p=e.createElement("span"),p.innerHTML=" ",p.style.display="inline",s.insertBefore(p,s.firstChild);var d=p.getBoundingClientRect().left;if(s.removeChild(p),p=null,s.previousElementSibling&&s.previousElementSibling.hasAttribute("data-hangPunctHelper")&&s.parentElement.removeChild(s.previousElementSibling),d-y-1<=s.parentElement.getBoundingClientRect().left){if(h=s.getBoundingClientRect().top,s.style.marginLeft=-y+"px",h!==s.getBoundingClientRect().top){var m=e.createElement("br");m.setAttribute("data-hangPunctHelper"),s.insertBefore(m,s.firstChild)}}else s.style.marginLeft=0}}else("force-end"===l.value||"allow-end"===l.value||"last"===l.value)&&console.warn("Not implemented yet.")}};t.onresize||(t.onresize=l(stylefill.runFills,75)),stylefill.init({"hanging-punctuation":n})}(document,window);var stylefill={allRules:new Object,allFills:new Object,init:function(e){this.allFills=e,this.getStyleSheet(e)},objSize:function(e){var t,l=0;for(t in e)e.hasOwnProperty(t)&&l++;return l},arraySliceShim:function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,l){var n,i=this.length,r=[];if(this.charAt)for(n=0;i>n;n++)r.push(this.charAt(n));else for(n=0;n<this.length;n++)r.push(this[n]);return e.call(r,t,l||r.length)}}},loadFile:function(e,t,l){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&stylefill.findRules(e,this.responseText,l)},n.send(null)},getStyleSheet:function(e){var t=(new Array,Array.prototype.slice.call(document.getElementsByTagName("link")));t.push(Array.prototype.slice.call(document.getElementsByTagName("style"))[0]),t.reverse();for(var l=this.objSize(t);l-->0;){var n=t[l];n.innerHTML?this.findRules(e,n.innerHTML,l):n.href.match(document.domain)&&this.loadFile(e,n.href,l)}},checkRule:function(e){var t=e.replace(/(^|-)([a-z])/g,function(e,t,l){return l.toUpperCase()});return document.body&&("Webkit"+t in document.body.style||"Moz"+t in document.body.style||"O"+t in document.body.style||e in document.body.style)?!0:!1},findRules:function(e,t,l){if(t){this.objSize(e);for(property in e)for(var n,i=new RegExp("([^}{]+){([^}]+)?"+property.replace("-","\\-")+"[\\s\\t]*:[\\s\\t]*([^;]+)","gi"),r=stylefill.checkRule(property);n=i.exec(t);){var o=n[1].replace(/^([\s\n\r\t]+|\/\*.*?\*\/)+/,"").replace(/[\s\n\r\t]+$/,""),s=n[3];o=o.split(",");for(sel in o){var a=o[sel];stylefill.allRules[a]||(stylefill.allRules[a]=new Object),stylefill.allRules[a][property]={support:r,value:s}}}1==l&&this.runFills()}},runFills:function(){var e=stylefill.allRules,t=stylefill.allFills;for(i in e){var l=e[i];for(j in l){var n=l[j],r=t[j],o={support:n.support,selector:i,property:j,value:n.value};r(o)}}},binder:function(e,t,l){for(var t=t.split(","),n=t.length;n-->0;)e.attachEvent?e.attachEvent("on"+t[n].trim(),l):e.addEventListener(t[n].trim(),l,!1)}};!function(e,t){"use strict";var l=function(e,t,l){var n;return function(){var i=this,r=arguments,o=function(){n=null,l||e.apply(i,r)},s=l&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,r)}},n=function(l){var n,i,r={};for(n=e.querySelectorAll(l.selector),i=n.length;i-->0;){var o,s,a,u,c,f,p,h,y,d=0;if(s=n[i],a=s.textContent,u=a[0],c=a[a.length-1],f=t.getComputedStyle(s,null),"none"===l.value);else if("first"===l.value){if(null!==u.match(/\“|\”/)){o=f.fontWeight+" "+f.fontSize+" "+f.fontFamily+" "+f.fontStretch+" "+f.fontStyle,o in r||(p=e.createElement("span"),p.innerHTML=u,s.appendChild(p),r[o]=p.offsetWidth,s.removeChild(p)),y=r[o],p=null,p=e.createElement("span"),p.innerHTML=" ",p.style.display="inline",s.insertBefore(p,s.firstChild);var d=p.getBoundingClientRect().left;if(s.removeChild(p),p=null,s.previousElementSibling&&s.previousElementSibling.hasAttribute("data-hangPunctHelper")&&s.parentElement.removeChild(s.previousElementSibling),d-y-1<=s.parentElement.getBoundingClientRect().left){if(h=s.getBoundingClientRect().top,s.style.marginLeft=-y+"px",h!==s.getBoundingClientRect().top){var m=e.createElement("br");m.setAttribute("data-hangPunctHelper"),s.insertBefore(m,s.firstChild)}}else s.style.marginLeft=0}}else("force-end"===l.value||"allow-end"===l.value||"last"===l.value)&&console.warn("Not implemented yet.")}};t.onresize||(t.onresize=l(stylefill.runFills,75)),stylefill.init({"hanging-punctuation":n})}(document,window);var stylefill={allRules:new Object,allFills:new Object,init:function(e){this.allFills=e,this.getStyleSheet(e)},objSize:function(e){var t,l=0;for(t in e)e.hasOwnProperty(t)&&l++;return l},arraySliceShim:function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,l){var n,i=this.length,r=[];if(this.charAt)for(n=0;i>n;n++)r.push(this.charAt(n));else for(n=0;n<this.length;n++)r.push(this[n]);return e.call(r,t,l||r.length)}}},loadFile:function(e,t,l){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&stylefill.findRules(e,this.responseText,l)},n.send(null)},getStyleSheet:function(e){var t=(new Array,Array.prototype.slice.call(document.getElementsByTagName("link")));t.push(Array.prototype.slice.call(document.getElementsByTagName("style"))[0]),t.reverse();for(var l=this.objSize(t);l-->0;){var n=t[l];n.innerHTML?this.findRules(e,n.innerHTML,l):n.href.match(document.domain)&&this.loadFile(e,n.href,l)}},checkRule:function(e){var t=e.replace(/(^|-)([a-z])/g,function(e,t,l){return l.toUpperCase()});return document.body&&("Webkit"+t in document.body.style||"Moz"+t in document.body.style||"O"+t in document.body.style||e in document.body.style)?!0:!1},findRules:function(e,t,l){if(t){this.objSize(e);for(property in e)for(var n,i=new RegExp("([^}{]+){([^}]+)?"+property.replace("-","\\-")+"[\\s\\t]*:[\\s\\t]*([^;]+)","gi"),r=stylefill.checkRule(property);n=i.exec(t);){var o=n[1].replace(/^([\s\n\r\t]+|\/\*.*?\*\/)+/,"").replace(/[\s\n\r\t]+$/,""),s=n[3];o=o.split(",");for(sel in o){var a=o[sel];stylefill.allRules[a]||(stylefill.allRules[a]=new Object),stylefill.allRules[a][property]={support:r,value:s}}}1==l&&this.runFills()}},runFills:function(){var e=stylefill.allRules,t=stylefill.allFills;for(i in e){var l=e[i];for(j in l){var n=l[j],r=t[j],o={support:n.support,selector:i,property:j,value:n.value};r(o)}}},binder:function(e,t,l){for(var t=t.split(","),n=t.length;n-->0;)e.attachEvent?e.attachEvent("on"+t[n].trim(),l):e.addEventListener(t[n].trim(),l,!1)}};!function(e,t){"use strict";var l=function(e,t,l){var n;return function(){var i=this,r=arguments,o=function(){n=null,l||e.apply(i,r)},s=l&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,r)}},n=function(l){var n,i,r={};for(n=e.querySelectorAll(l.selector),i=n.length;i-->0;){var o,s,a,u,c,f,p,h,y,d=0;if(s=n[i],a=s.textContent,u=a[0],c=a[a.length-1],f=t.getComputedStyle(s,null),"none"===l.value);else if("first"===l.value){if(null!==u.match(/\“|\”/)){o=f.fontWeight+" "+f.fontSize+" "+f.fontFamily+" "+f.fontStretch+" "+f.fontStyle,o in r||(p=e.createElement("span"),p.innerHTML=u,s.appendChild(p),r[o]=p.offsetWidth,s.removeChild(p)),y=r[o],p=null,p=e.createElement("span"),p.innerHTML=" ",p.style.display="inline",s.insertBefore(p,s.firstChild);var d=p.getBoundingClientRect().left;if(s.removeChild(p),p=null,s.previousElementSibling&&s.previousElementSibling.hasAttribute("data-hangPunctHelper")&&s.parentElement.removeChild(s.previousElementSibling),d-y-1<=s.parentElement.getBoundingClientRect().left){if(h=s.getBoundingClientRect().top,s.style.marginLeft=-y+"px",h!==s.getBoundingClientRect().top){var m=e.createElement("br");m.setAttribute("data-hangPunctHelper"),s.insertBefore(m,s.firstChild)}}else s.style.marginLeft=0}}else("force-end"===l.value||"allow-end"===l.value||"last"===l.value)&&console.warn("Not implemented yet.")}};t.onresize||(t.onresize=l(stylefill.runFills,75)),stylefill.init({"hanging-punctuation":n})}(document,window);var stylefill={allRules:new Object,allFills:new Object,init:function(e){this.allFills=e,this.getStyleSheet(e)},objSize:function(e){var t,l=0;for(t in e)e.hasOwnProperty(t)&&l++;return l},arraySliceShim:function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,l){var n,i=this.length,r=[];if(this.charAt)for(n=0;i>n;n++)r.push(this.charAt(n));else for(n=0;n<this.length;n++)r.push(this[n]);return e.call(r,t,l||r.length)}}},loadFile:function(e,t,l){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&stylefill.findRules(e,this.responseText,l)},n.send(null)},getStyleSheet:function(e){var t=(new Array,Array.prototype.slice.call(document.getElementsByTagName("link")));t.push(Array.prototype.slice.call(document.getElementsByTagName("style"))[0]),t.reverse();for(var l=this.objSize(t);l-->0;)if("undefined"!=typeof t[l]){var n=t[l];n.innerHTML?this.findRules(e,n.innerHTML,l):n.href.match(document.domain)&&this.loadFile(e,n.href,l)}},checkRule:function(e){var t=e.replace(/(^|-)([a-z])/g,function(e,t,l){return l.toUpperCase()});return document.body&&("Webkit"+t in document.body.style||"Moz"+t in document.body.style||"O"+t in document.body.style||e in document.body.style)?!0:!1},findRules:function(e,t,l){if(t){this.objSize(e);for(property in e)for(var n,i=new RegExp("([^}{]+){([^}]+)?"+property.replace("-","\\-")+"[\\s\\t]*:[\\s\\t]*([^;]+)","gi"),r=stylefill.checkRule(property);n=i.exec(t);){var o=n[1].replace(/^([\s\n\r\t]+|\/\*.*?\*\/)+/,"").replace(/[\s\n\r\t]+$/,""),s=n[3];o=o.split(",");for(sel in o){var a=o[sel];stylefill.allRules[a]||(stylefill.allRules[a]=new Object),stylefill.allRules[a][property]={support:r,value:s}}}1==l&&this.runFills()}},runFills:function(){var e=stylefill.allRules,t=stylefill.allFills;for(i in e){var l=e[i];for(j in l){var n=l[j],r=t[j],o={support:n.support,selector:i,property:j,value:n.value};r(o)}}},binder:function(e,t,l){for(var t=t.split(","),n=t.length;n-->0;)e.attachEvent?e.attachEvent("on"+t[n].trim(),l):e.addEventListener(t[n].trim(),l,!1)}};!function(e,t){"use strict";var l=function(e,t,l){var n;return function(){var i=this,r=arguments,o=function(){n=null,l||e.apply(i,r)},s=l&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,r)}},n=function(l){var n,i,r={};for(n=e.querySelectorAll(l.selector),i=n.length;i-->0;){var o,s,a,u,c,f,p,h,y,d,m=0;if(s=n[i],a=s.parentElement,u=s.textContent,c=u[0],f=u[u.length-1],p=t.getComputedStyle(s,null),"none"===l.value);else if("first"===l.value){if(null!==c.match(/\“/))if(o=p.fontWeight+" "+p.fontSize+" "+p.fontFamily+" "+p.fontStretch+" "+p.fontStyle,o in r||(h=e.createElement("span"),h.innerHTML=c,s.appendChild(h),r[o]=h.offsetWidth,s.removeChild(h)),d=r[o],h=null,h=e.createElement("span"),h.innerHTML=c,h.style.display="inline",a.insertBefore(h,s),m=h.getBoundingClientRect().left,a.removeChild(h),h=null,s.previousElementSibling&&s.previousElementSibling.hasAttribute("data-hangPunctHelper","")&&s.parentElement.removeChild(s.previousElementSibling),console.log(m-d-1,a.getBoundingClientRect().left),m-d-1<=a.getBoundingClientRect().left){if(y=s.getBoundingClientRect().top,s.style.marginLeft=-d+"px",y!==s.getBoundingClientRect().top){var v=e.createElement("br");v.setAttribute("data-hangPunctHelper",""),s.insertBefore(v,s.firstChild)}}else s.style.marginLeft=0}else("force-end"===l.value||"allow-end"===l.value||"last"===l.value)&&console.warn("Not implemented yet.")}};t.onresize||(t.onresize=l(stylefill.runFills,75)),stylefill.init({"hanging-punctuation":n})}(document,window);var stylefill={allRules:new Object,allFills:new Object,init:function(e){this.allFills=e,this.getStyleSheet(e)},objSize:function(e){var t,l=0;for(t in e)e.hasOwnProperty(t)&&l++;return l},arraySliceShim:function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,l){var n,i=this.length,r=[];if(this.charAt)for(n=0;i>n;n++)r.push(this.charAt(n));else for(n=0;n<this.length;n++)r.push(this[n]);return e.call(r,t,l||r.length)}}},loadFile:function(e,t,l){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&stylefill.findRules(e,this.responseText,l)},n.send(null)},getStyleSheet:function(e){var t=(new Array,Array.prototype.slice.call(document.getElementsByTagName("link")));t.push(Array.prototype.slice.call(document.getElementsByTagName("style"))[0]),t.reverse();for(var l=this.objSize(t);l-->0;)if("undefined"!=typeof t[l]){var n=t[l];n.innerHTML?this.findRules(e,n.innerHTML,l):n.href.match(document.domain)&&this.loadFile(e,n.href,l)}},checkRule:function(e){var t=e.replace(/(^|-)([a-z])/g,function(e,t,l){return l.toUpperCase()});return document.body&&("Webkit"+t in document.body.style||"Moz"+t in document.body.style||"O"+t in document.body.style||e in document.body.style)?!0:!1},findRules:function(e,t,l){if(t){this.objSize(e);for(property in e)for(var n,i=new RegExp("([^}{]+){([^}]+)?"+property.replace("-","\\-")+"[\\s\\t]*:[\\s\\t]*([^;]+)","gi"),r=stylefill.checkRule(property);n=i.exec(t);){var o=n[1].replace(/^([\s\n\r\t]+|\/\*.*?\*\/)+/,"").replace(/[\s\n\r\t]+$/,""),s=n[3];o=o.split(",");for(sel in o){var a=o[sel];stylefill.allRules[a]||(stylefill.allRules[a]=new Object),stylefill.allRules[a][property]={support:r,value:s}}}1==l&&this.runFills()}},runFills:function(){var e=stylefill.allRules,t=stylefill.allFills;for(i in e){var l=e[i];for(j in l){var n=l[j],r=t[j],o={support:n.support,selector:i,property:j,value:n.value};r(o)}}},binder:function(e,t,l){for(var t=t.split(","),n=t.length;n-->0;)e.attachEvent?e.attachEvent("on"+t[n].trim(),l):e.addEventListener(t[n].trim(),l,!1)}};!function(e,t){"use strict";var l=function(e,t,l){var n;return function(){var i=this,r=arguments,o=function(){n=null,l||e.apply(i,r)},s=l&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,r)}},n=function(l){var n,i,r={};for(n=e.querySelectorAll(l.selector),i=n.length;i-->0;){var o,s,a,u,c,f,p,h,y,d,m,v=0;s=n[i],a=s.parentElement,u=s.textContent,c=u[0],f=u[u.length-1],p=t.getComputedStyle(s,null),"none"===l.value||("first"===l.value?null!==c.match(/\“/)&&(o=p.fontWeight+" "+p.fontSize+" "+p.fontFamily+" "+p.fontStretch+" "+p.fontStyle,o in r||(y=e.createElement("span"),y.innerHTML=c,s.appendChild(y),r[o]=y.offsetWidth,s.removeChild(y)),m=r[o],y=null,s.previousElementSibling&&s.previousElementSibling.hasAttribute("data-hangPunctHelper")&&a.removeChild(s.previousElementSibling),"undefined"!=typeof s.children[0]&&s.children[0].hasAttribute("data-hangPunctFirst")?h=s.children[0]:(s.innerHTML=s.innerHTML.replace(c,""),h=e.createElement("span"),h.setAttribute("data-hangPunctFirst",!0),h.textContent=c,s.insertBefore(h,s.firstChild)),v=h.getBoundingClientRect().left,console.log(Math.ceil(v-m),Math.floor(s.getBoundingClientRect().left)),v-m-1<=s.getBoundingClientRect().left?(d=s.getBoundingClientRect().top,h.style.outline="1px solid green",h.style.marginLeft=-m+"px"):(console.log("hi"),h.style.outline="1px solid blue",h.style.marginLeft=0,stylefill.runFills)):("force-end"===l.value||"allow-end"===l.value||"last"===l.value)&&console.warn("Not implemented yet."))}};t.onresize||(t.onresize=l(stylefill.runFills,100)),stylefill.init({"hanging-punctuation":n})}(document,window);var stylefill={allRules:new Object,allFills:new Object,init:function(e){this.allFills=e,this.getStyleSheet(e)},objSize:function(e){var t,l=0;for(t in e)e.hasOwnProperty(t)&&l++;return l},arraySliceShim:function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,l){var n,i=this.length,r=[];if(this.charAt)for(n=0;i>n;n++)r.push(this.charAt(n));else for(n=0;n<this.length;n++)r.push(this[n]);return e.call(r,t,l||r.length)}}},loadFile:function(e,t,l){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&stylefill.findRules(e,this.responseText,l)},n.send(null)},getStyleSheet:function(e){var t=(new Array,Array.prototype.slice.call(document.getElementsByTagName("link")));t.push(Array.prototype.slice.call(document.getElementsByTagName("style"))[0]),t.reverse();for(var l=this.objSize(t);l-->0;)if("undefined"!=typeof t[l]){var n=t[l];n.innerHTML?this.findRules(e,n.innerHTML,l):n.href.match(document.domain)&&this.loadFile(e,n.href,l)}},checkRule:function(e){var t=e.replace(/(^|-)([a-z])/g,function(e,t,l){return l.toUpperCase()});return document.body&&("Webkit"+t in document.body.style||"Moz"+t in document.body.style||"O"+t in document.body.style||e in document.body.style)?!0:!1},findRules:function(e,t,l){if(t){{this.objSize(e)}for(property in e)for(var n,i=new RegExp("([^}{]+){([^}]+)?"+property.replace("-","\\-")+"[\\s\\t]*:[\\s\\t]*([^;]+)","gi"),r=stylefill.checkRule(property);n=i.exec(t);){var o=n[1].replace(/^([\s\n\r\t]+|\/\*.*?\*\/)+/,"").replace(/[\s\n\r\t]+$/,""),s=n[3];o=o.split(",");for(sel in o){var a=o[sel];stylefill.allRules[a]||(stylefill.allRules[a]=new Object),stylefill.allRules[a][property]={support:r,value:s}}}1==l&&this.runFills()}},runFills:function(){var e=stylefill.allRules,t=stylefill.allFills;for(i in e){var l=e[i];for(j in l){var n=l[j],r=t[j],o={support:n.support,selector:i,property:j,value:n.value};r(o)}}},binder:function(e,t,l){for(var t=t.split(","),n=t.length;n-->0;)e.attachEvent?e.attachEvent("on"+t[n].trim(),l):e.addEventListener(t[n].trim(),l,!1)}};!function(e,t){"use strict";var l=function(e,t,l){var n;return function(){var i=this,r=arguments,o=function(){n=null,l||e.apply(i,r)},s=l&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(i,r)}},n=function(l){var n,i,r={};for(n=e.querySelectorAll(l.selector),i=n.length;i-->0;){var o,s,a,u,c,f,p,h,y,d,m,v=0;if(s=n[i],a=s.parentElement,u=s.textContent,c=u[0],f=u[u.length-1],p=t.getComputedStyle(s,null),"none"===l.value);else if("first"===l.value){if(null!==c.match(/\“/))if(o=p.fontWeight+" "+p.fontSize+" "+p.fontFamily+" "+p.fontStretch+" "+p.fontStyle,o in r||(y=e.createElement("span"),y.innerHTML=c,s.appendChild(y),r[o]=y.offsetWidth,s.removeChild(y)),m=r[o],y=null,s.previousElementSibling&&s.previousElementSibling.hasAttribute("data-hangPunctHelper")&&a.removeChild(s.previousElementSibling),"undefined"!=typeof s.children[0]&&s.children[0].hasAttribute("data-hangPunctFirst")?h=s.children[0]:(s.innerHTML=s.innerHTML.replace(c,""),h=e.createElement("span"),h.setAttribute("data-hangPunctFirst",!0),h.textContent=c,s.insertBefore(h,s.firstChild)),v=h.getBoundingClientRect().left,console.log(Math.ceil(v-m),Math.floor(s.getBoundingClientRect().left)),v-m-1<=s.getBoundingClientRect().left){if(d=s.getBoundingClientRect().top,h.style.marginLeft=-m+"px",d!==s.getBoundingClientRect().top){var g=e.createElement("br");g.setAttribute("data-hangPunctHelper",!0),a.insertBefore(g,s)}}else h.style.marginLeft=0,stylefill.runFills}else("force-end"===l.value||"allow-end"===l.value||"last"===l.value)&&console.warn("Not implemented yet.")}};t.onresize||(t.onresize=l(stylefill.runFills,100)),stylefill.init({"hanging-punctuation":n})}(document,window);
